# üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ Telegram Slot Bot

## –û–±–∑–æ—Ä —Ñ–∞–π–ª–æ–≤

```
telegram_slot_bot/
‚îÇ
‚îú‚îÄ‚îÄ üìÑ bot.py                    # –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –±–æ—Ç–∞
‚îú‚îÄ‚îÄ üìÑ models.py                 # –ú–æ–¥–µ–ª–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (SQLAlchemy)
‚îú‚îÄ‚îÄ üìÑ database.py               # –†–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ üìÑ game_logic.py             # –ò–≥—Ä–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ —Å–ª–æ—Ç-–º–∞—à–∏–Ω—ã
‚îú‚îÄ‚îÄ üìÑ achievements.py           # –°–∏—Å—Ç–µ–º–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
‚îú‚îÄ‚îÄ üìÑ dice_tester.py            # –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Telegram Dice API
‚îÇ
‚îú‚îÄ‚îÄ üìÑ requirements.txt          # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
‚îú‚îÄ‚îÄ üìÑ .env.example              # –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ üìÑ .env                      # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–ù–ï –∫–æ–º–º–∏—Ç–∏—Ç—å!)
‚îú‚îÄ‚îÄ üìÑ .gitignore                # –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º—ã–µ —Ñ–∞–π–ª—ã
‚îÇ
‚îú‚îÄ‚îÄ üìÑ README.md                 # –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ üìÑ QUICKSTART.md             # –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
‚îî‚îÄ‚îÄ üìÑ PROJECT_STRUCTURE.md      # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

---

## üìÑ –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤

### `bot.py` - –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –±–æ—Ç–∞ (554 —Å—Ç—Ä–æ–∫–∏)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥ Telegram

**–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–æ—Ç–∞ –∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∞–¥–º–∏–Ω-–∫–æ–º–∞–Ω–¥
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram Stars (–ø–ª–∞—Ç–µ–∂–∏)
- –û–±—Ä–∞–±–æ—Ç–∫–∞ callback –∫–Ω–æ–ø–æ–∫

**–ö–æ–º–∞–Ω–¥—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
```python
/start          # –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
/spin           # –ö—Ä—É—Ç–∏—Ç—å —Å–ª–æ—Ç
/balance        # –ü–æ–∫–∞–∑–∞—Ç—å –±–∞–ª–∞–Ω—Å
/stats          # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–≥—Ä–æ–∫–∞
/achievements   # –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è
/top            # –¢–æ–ø –∏–≥—Ä–æ–∫–æ–≤
/buy            # –ö—É–ø–∏—Ç—å –∑–≤—ë–∑–¥—ã
/help           # –°–ø—Ä–∞–≤–∫–∞
```

**–ê–¥–º–∏–Ω –∫–æ–º–∞–Ω–¥—ã:**
```python
/adminstats     # –ì–ª–æ–±–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
/ban            # –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
/unban          # –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å
/givestars      # –í—ã–¥–∞—Ç—å –∑–≤—ë–∑–¥—ã
```

**–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
- `TELEGRAM_BOT_TOKEN` - –¢–æ–∫–µ–Ω –æ—Ç BotFather
- `DATABASE_URL` - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL
- `SPIN_COST` - –°—Ç–æ–∏–º–æ—Å—Ç—å —Å–ø–∏–Ω–∞
- `ADMIN_IDS` - ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
- `STARS_CONVERSION_RATE` - –ö—É—Ä—Å –∫–æ–Ω–≤–µ—Ä—Å–∏–∏

---

### `models.py` - –ú–æ–¥–µ–ª–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (247 —Å—Ç—Ä–æ–∫)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ç–∞–±–ª–∏—Ü PostgreSQL

**–ú–æ–¥–µ–ª–∏:**

#### `User` - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
```python
user_id              # Telegram User ID (Primary Key)
username             # Telegram username
first_name           # –ò–º—è
last_name            # –§–∞–º–∏–ª–∏—è
balance              # –ë–∞–ª–∞–Ω—Å –∑–≤—ë–∑–¥
total_spins          # –í—Å–µ–≥–æ —Å–ø–∏–Ω–æ–≤
total_wagered        # –í—Å–µ–≥–æ –ø–æ—Å—Ç–∞–≤–ª–µ–Ω–æ
total_won            # –í—Å–µ–≥–æ –≤—ã–∏–≥—Ä–∞–Ω–æ
biggest_win          # –°–∞–º—ã–π –±–æ–ª—å—à–æ–π –≤—ã–∏–≥—Ä—ã—à
achievements_unlocked # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
created_at           # –î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
last_spin_at         # –ü–æ—Å–ª–µ–¥–Ω–∏–π —Å–ø–∏–Ω
last_bonus_at        # –ü–æ—Å–ª–µ–¥–Ω–∏–π –±–æ–Ω—É—Å
is_banned            # –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω?
ban_reason           # –ü—Ä–∏—á–∏–Ω–∞ –±–∞–Ω–∞
```

#### `Transaction` - –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
```python
id                   # ID —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
user_id              # ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
transaction_type     # –¢–∏–ø: spin, win, purchase, bonus, achievement
amount               # –°—É–º–º–∞
balance_before       # –ë–∞–ª–∞–Ω—Å –¥–æ
balance_after        # –ë–∞–ª–∞–Ω—Å –ø–æ—Å–ª–µ
dice_value           # –ó–Ω–∞—á–µ–Ω–∏–µ dice
combination          # –ö–æ–º–±–∏–Ω–∞—Ü–∏—è
telegram_payment_id  # ID –ø–ª–∞—Ç–µ–∂–∞ Telegram
telegram_stars_amount # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ Telegram Stars
description          # –û–ø–∏—Å–∞–Ω–∏–µ
timestamp            # –í—Ä–µ–º—è
```

#### `Achievement` - –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è
```python
id                      # ID –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
code                    # –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–æ–¥
title                   # –ù–∞–∑–≤–∞–Ω–∏–µ
description             # –û–ø–∏—Å–∞–Ω–∏–µ
icon                    # Emoji –∏–∫–æ–Ω–∫–∞
reward                  # –ù–∞–≥—Ä–∞–¥–∞ –≤ –∑–≤—ë–∑–¥–∞—Ö
requirement_description # –£—Å–ª–æ–≤–∏–µ –ø–æ–ª—É—á–µ–Ω–∏—è
is_active               # –ê–∫—Ç–∏–≤–Ω–æ?
created_at              # –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è
```

#### `UserAchievement` - –°–≤—è–∑—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å-–¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ
```python
id              # ID
user_id         # ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
achievement_id  # ID –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
unlocked_at     # –î–∞—Ç–∞ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
is_notified     # –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ?
```

#### `Payment` - –ü–ª–∞—Ç–µ–∂–∏
```python
id                              # ID –ø–ª–∞—Ç–µ–∂–∞
user_id                         # ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
telegram_payment_charge_id      # ID –æ—Ç Telegram
provider_payment_charge_id      # ID –æ—Ç –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
telegram_stars_amount           # –°—É–º–º–∞ –≤ Telegram Stars
game_stars_amount               # –°—É–º–º–∞ –≤ –∏–≥—Ä–æ–≤—ã—Ö –∑–≤—ë–∑–¥–∞—Ö
status                          # –°—Ç–∞—Ç—É—Å: pending, completed, failed, refunded
timestamp                       # –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è
completed_at                    # –í—Ä–µ–º—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
```

#### `GameStats` - –ì–ª–æ–±–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
```python
id                          # ID
date                        # –î–∞—Ç–∞
total_users                 # –í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
active_users                # –ê–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
new_users                   # –ù–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
total_spins                 # –í—Å–µ–≥–æ —Å–ø–∏–Ω–æ–≤
total_wagered               # –í—Å–µ–≥–æ –ø–æ—Å—Ç–∞–≤–ª–µ–Ω–æ
total_won                   # –í—Å–µ–≥–æ –≤—ã–∏–≥—Ä–∞–Ω–æ
total_purchases             # –í—Å–µ–≥–æ –ø–æ–∫—É–ø–æ–∫
total_telegram_stars_received # –ü–æ–ª—É—á–µ–Ω–æ Telegram Stars
total_game_stars_sold       # –ü—Ä–æ–¥–∞–Ω–æ –∏–≥—Ä–æ–≤—ã—Ö –∑–≤—ë–∑–¥
actual_rtp                  # –ê–∫—Ç—É–∞–ª—å–Ω—ã–π RTP
house_profit                # –ü—Ä–∏–±—ã–ª—å –∫–∞–∑–∏–Ω–æ
```

#### `DiceValueMapping` - –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ dice_value –∫–æ–º–±–∏–Ω–∞—Ü–∏—è–º
```python
id                  # ID
dice_value          # –ó–Ω–∞—á–µ–Ω–∏–µ dice (1-64)
combination         # –ö–æ–º–±–∏–Ω–∞—Ü–∏—è —ç–º–æ–¥–∑–∏
is_win              # –í—ã–∏–≥—Ä—ã—à–Ω–∞—è?
payout_multiplier   # –ú–Ω–æ–∂–∏—Ç–µ–ª—å –≤—ã–ø–ª–∞—Ç—ã
occurrence_count    # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—è–≤–ª–µ–Ω–∏–π
last_seen           # –ü–æ—Å–ª–µ–¥–Ω–µ–µ –ø–æ—è–≤–ª–µ–Ω–∏–µ
```

---

### `database.py` - –†–∞–±–æ—Ç–∞ —Å –ë–î (400+ —Å—Ç—Ä–æ–∫)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö

**–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã:**

#### –ú–µ—Ç–æ–¥—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:
```python
get_or_create_user()    # –ü–æ–ª—É—á–∏—Ç—å –∏–ª–∏ —Å–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
get_user()              # –ü–æ–ª—É—á–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ ID
update_balance()        # –û–±–Ω–æ–≤–∏—Ç—å –±–∞–ª–∞–Ω—Å
ban_user()              # –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å
unban_user()            # –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å
is_user_banned()        # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–∞–Ω
```

#### –ú–µ—Ç–æ–¥—ã —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π:
```python
log_transaction()       # –ó–∞–ø–∏—Å–∞—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é
get_user_transactions() # –ü–æ–ª—É—á–∏—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```

#### –ú–µ—Ç–æ–¥—ã –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π:
```python
create_achievement()       # –°–æ–∑–¥–∞—Ç—å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ
get_achievement_by_code()  # –ü–æ–ª—É—á–∏—Ç—å –ø–æ –∫–æ–¥—É
get_all_achievements()     # –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ
unlock_achievement()       # –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
get_user_achievements()    # –ü–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
has_achievement()          # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ
```

#### –ú–µ—Ç–æ–¥—ã –ø–ª–∞—Ç–µ–∂–µ–π:
```python
create_payment()        # –°–æ–∑–¥–∞—Ç—å –ø–ª–∞—Ç—ë–∂
complete_payment()      # –ó–∞–≤–µ—Ä—à–∏—Ç—å –ø–ª–∞—Ç—ë–∂
get_user_payments()     # –ü–æ–ª—É—á–∏—Ç—å –ø–ª–∞—Ç–µ–∂–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```

#### –ú–µ—Ç–æ–¥—ã —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏:
```python
get_user_stats()        # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
get_top_users()         # –¢–æ–ø –∏–≥—Ä–æ–∫–æ–≤
get_global_stats()      # –ì–ª–æ–±–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
```

#### –ú–µ—Ç–æ–¥—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
```python
record_dice_value()     # –ó–∞–ø–∏—Å–∞—Ç—å dice_value
get_dice_statistics()   # –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É dice
```

---

### `game_logic.py` - –ò–≥—Ä–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ (120 —Å—Ç—Ä–æ–∫)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –õ–æ–≥–∏–∫–∞ —Å–ª–æ—Ç-–º–∞—à–∏–Ω—ã –∏ —Ä–∞—Å—á—ë—Ç –≤—ã–∏–≥—Ä—ã—à–µ–π

**–ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã:**
```python
PAYOUTS = {
    "üçíüçíüçí": 100,
    "üçãüçãüçã": 200,
    "üçáüçáüçá": 350,
    "7Ô∏è‚É£7Ô∏è‚É£7Ô∏è‚É£": 500,
}

DICE_TO_COMBO = {
    1: "üçíüçíüçí",
    22: "üçãüçãüçã",
    43: "üçáüçáüçá",
    64: "7Ô∏è‚É£7Ô∏è‚É£7Ô∏è‚É£",
}
```

**–ú–µ—Ç–æ–¥—ã:**
```python
check_win()                     # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—ã–∏–≥—Ä—ã—à
calculate_theoretical_rtp()     # –†–∞—Å—á—ë—Ç RTP
get_payout_table()              # –ü–æ–ª—É—á–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É –≤—ã–ø–ª–∞—Ç
get_win_combinations_count()    # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–º–±–∏–Ω–∞—Ü–∏–π
get_max_payout()                # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –≤—ã–∏–≥—Ä—ã—à
get_min_payout()                # –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –≤—ã–∏–≥—Ä—ã—à
```

**‚ö†Ô∏è –í–ê–ñ–ù–û:** `DICE_TO_COMBO` —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–∏–º–µ—Ä–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è! –¢—Ä–µ–±—É–µ—Ç—Å—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –ø–æ–º–æ—â—å—é `dice_tester.py`.

---

### `achievements.py` - –°–∏—Å—Ç–µ–º–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π (300+ —Å—Ç—Ä–æ–∫)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è–º–∏ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ª–æ–≤–∏–π

**–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è (16 —à—Ç—É–∫):**
- –ò–≥—Ä–æ–≤—ã–µ: first_spin, beginner, experienced, veteran
- –ü–æ–±–µ–¥–Ω—ã–µ: first_win, lucky_10, lucky_100, jackpot, big_win
- –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ: big_spender, mega_spender, rich, millionaire
- –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ: dedicated, achievement_hunter, collector

**–ú–µ—Ç–æ–¥—ã:**
```python
initialize_achievements()           # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤ –ë–î
check_and_unlock_achievements()     # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞
get_achievement_progress()          # –ü—Ä–æ–≥—Ä–µ—Å—Å –ø–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è–º
format_achievement_notification()   # –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
```

**–¢—Ä–∏–≥–≥–µ—Ä—ã:**
- `spin` - –ü–æ—Å–ª–µ —Å–ø–∏–Ω–∞
- `win` - –ü–æ—Å–ª–µ –≤—ã–∏–≥—Ä—ã—à–∞
- `balance_check` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞
- `achievement_unlock` - –ü–æ—Å–ª–µ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è

---

### `dice_tester.py` - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Dice API (200+ —Å—Ç—Ä–æ–∫)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è dice_value —Ä–µ–∞–ª—å–Ω—ã–º –∫–æ–º–±–∏–Ω–∞—Ü–∏—è–º

**–ö–æ–º–∞–Ω–¥—ã:**
```python
/test [num_spins]       # –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç
/analyze                # –ê–Ω–∞–ª–∏–∑ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
/export                 # –≠–∫—Å–ø–æ—Ä—Ç –≤ CSV
/resetstats confirm     # –°–±—Ä–æ—Å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
```

**–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ: `python dice_tester.py`
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/test 100` –≤ –±–æ—Ç–∞
3. –í—Ä—É—á–Ω—É—é –∑–∞–ø–∏—Å—ã–≤–∞–π—Ç–µ –≤–∏–∑—É–∞–ª—å–Ω—ã–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏
4. –ê–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã: `/analyze`
5. –û–±–Ω–æ–≤–∏—Ç–µ `DICE_TO_COMBO` –≤ `game_logic.py`

---

## üîÑ –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

### –ü—Ä–æ—Ü–µ—Å—Å –∏–≥—Ä—ã (—Å–ø–∏–Ω):

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
    ‚Üì
/spin –∫–æ–º–∞–Ω–¥–∞
    ‚Üì
bot.py: spin()
    ‚Üì
database.py: update_balance(-35)  ‚Üê –°–ø–∏—Å–∞–Ω–∏–µ —Å—Ç–∞–≤–∫–∏
    ‚Üì
Telegram API: send_dice()
    ‚Üì
dice_value (1-64)
    ‚Üì
game_logic.py: check_win()
    ‚Üì
database.py: log_transaction()
    ‚Üì
achievements.py: check_and_unlock_achievements()
    ‚Üì
database.py: update_balance(+payout)  ‚Üê –ï—Å–ª–∏ –≤—ã–∏–≥—Ä—ã—à
    ‚Üì
–û—Ç–≤–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
```

### –ü—Ä–æ—Ü–µ—Å—Å –ø–æ–∫—É–ø–∫–∏ (Telegram Stars):

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
    ‚Üì
/buy –∫–æ–º–∞–Ω–¥–∞
    ‚Üì
bot.py: buy_command()  ‚Üê –ü–æ–∫–∞–∑ –ø–∞–∫–µ—Ç–æ–≤
    ‚Üì
–ù–∞–∂–∞—Ç–∏–µ –∫–Ω–æ–ø–∫–∏
    ‚Üì
bot.py: buy_callback()  ‚Üê –°–æ–∑–¥–∞–Ω–∏–µ invoice
    ‚Üì
Telegram Payment API
    ‚Üì
bot.py: precheckout_callback()  ‚Üê –í–∞–ª–∏–¥–∞—Ü–∏—è
    ‚Üì
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ–ø–ª–∞—á–∏–≤–∞–µ—Ç
    ‚Üì
bot.py: successful_payment_callback()
    ‚Üì
database.py: create_payment()
    ‚Üì
database.py: complete_payment()
    ‚Üì
database.py: update_balance(+stars)
    ‚Üì
–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
```

### –ü—Ä–æ—Ü–µ—Å—Å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π:

```
–î–µ–π—Å—Ç–≤–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Å–ø–∏–Ω/–≤—ã–∏–≥—Ä—ã—à)
    ‚Üì
achievements.py: check_and_unlock_achievements()
    ‚Üì
–ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ª–æ–≤–∏–π –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
    ‚Üì
database.py: unlock_achievement()
    ‚Üì
database.py: update_balance(+reward)
    ‚Üì
achievements.py: format_achievement_notification()
    ‚Üì
–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
```

---

## üóÑÔ∏è –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```sql
users ‚îÄ‚î¨‚îÄ< transactions (user_id)
       ‚îú‚îÄ< user_achievements (user_id)
       ‚îî‚îÄ< payments (user_id)

achievements ‚îÄ‚îÄ< user_achievements (achievement_id)

dice_value_mappings (–Ω–µ–∑–∞–≤–∏—Å–∏–º–∞—è —Ç–∞–±–ª–∏—Ü–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
game_stats (–Ω–µ–∑–∞–≤–∏—Å–∏–º–∞—è —Ç–∞–±–ª–∏—Ü–∞ –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏)
```

---

## üîß –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

### Python –ø–∞–∫–µ—Ç—ã:
- `python-telegram-bot` - Telegram Bot API
- `sqlalchemy` - ORM –¥–ª—è PostgreSQL
- `psycopg2-binary` - PostgreSQL –¥—Ä–∞–π–≤–µ—Ä
- `python-dotenv` - –ó–∞–≥—Ä—É–∑–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- `alembic` - –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- Python 3.8+
- PostgreSQL 12+
- 512MB RAM –º–∏–Ω–∏–º—É–º
- –ò–Ω—Ç–µ—Ä–Ω–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

### –ß—Ç–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç—Å—è:

**–ü–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º:**
- –ë–∞–ª–∞–Ω—Å
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ø–∏–Ω–æ–≤
- –û–±—â–∞—è —Å—É–º–º–∞ —Å—Ç–∞–≤–æ–∫
- –û–±—â–∞—è —Å—É–º–º–∞ –≤—ã–∏–≥—Ä—ã—à–µ–π
- –°–∞–º—ã–π –±–æ–ª—å—à–æ–π –≤—ã–∏–≥—Ä—ã—à
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
- –ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

**–ì–ª–æ–±–∞–ª—å–Ω–æ:**
- –í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ê–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (24—á)
- –ù–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (24—á)
- –í—Å–µ–≥–æ —Å–ø–∏–Ω–æ–≤
- RTP (Return To Player)
- –ü—Ä–∏–±—ã–ª—å "–∫–∞–∑–∏–Ω–æ"
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–¥–∞–∂

**–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**
- –ß–∞—Å—Ç–æ—Ç–∞ –ø–æ—è–≤–ª–µ–Ω–∏—è –∫–∞–∂–¥–æ–≥–æ dice_value
- –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ –∫–æ–º–±–∏–Ω–∞—Ü–∏–π
- –¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏–π RTP

---

## üéØ –¢–æ—á–∫–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è

### –ì–¥–µ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:

**–ù–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã:**
- –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤ `bot.py`
- –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ `main()`

**–ù–æ–≤—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è:**
- –î–æ–±–∞–≤–∏—Ç—å –≤ `ACHIEVEMENTS` –≤ `achievements.py`
- –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤ `check_and_unlock_achievements()`

**–ù–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã –ë–î:**
- –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –º–æ–¥–µ–ª—å –≤ `models.py`
- –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥—ã –≤ `database.py`

**–ò–∑–º–µ–Ω–µ–Ω–∏–µ –∏–≥—Ä–æ–≤–æ–π –ª–æ–≥–∏–∫–∏:**
- –û–±–Ω–æ–≤–∏—Ç—å `PAYOUTS` –∏–ª–∏ `DICE_TO_COMBO` –≤ `game_logic.py`

**–ù–æ–≤—ã–µ –ø–∞–∫–µ—Ç—ã –ø–æ–∫—É–ø–∫–∏:**
- –û–±–Ω–æ–≤–∏—Ç—å `packages` –≤ `buy_callback()` –≤ `bot.py`

---

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ–∑–¥–∞–Ω–∞ –¥–ª—è –ª–µ–≥–∫–æ–≥–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∏! üöÄ**
