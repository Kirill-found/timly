# üá∑üá∫ –î–µ–ø–ª–æ–π TIMLY –Ω–∞ Timeweb Cloud

–ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞ TIMLY –Ω–∞ —Ä–æ—Å—Å–∏–π—Å–∫–æ–º —Ö–æ—Å—Ç–∏–Ω–≥–µ Timeweb Cloud.

---

## üìã –ß—Ç–æ –≤–∞–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è

- ‚úÖ –ê–∫–∫–∞—É–Ω—Ç –Ω–∞ Timeweb Cloud (timeweb.com)
- ‚úÖ ~200-300‚ÇΩ –Ω–∞ –±–∞–ª–∞–Ω—Å–µ
- ‚úÖ OpenAI API –∫–ª—é—á
- ‚úÖ 30 –º–∏–Ω—É—Ç –≤—Ä–µ–º–µ–Ω–∏

---

## üéØ –®–ê–ì 1: –°–æ–∑–¥–∞–Ω–∏–µ –æ–±–ª–∞—á–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞

### 1.1 –í–æ–π–¥–∏—Ç–µ –≤ –ø–∞–Ω–µ–ª—å Timeweb

1. –û—Ç–∫—Ä–æ–π—Ç–µ: https://timeweb.cloud
2. –í–æ–π–¥–∏—Ç–µ –≤ –∞–∫–∫–∞—É–Ω—Ç
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **"–û–±–ª–∞—á–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä—ã"**

### 1.2 –°–æ–∑–¥–∞–π—Ç–µ —Å–µ—Ä–≤–µ—Ä

–ù–∞–∂–º–∏—Ç–µ **"–°–æ–∑–¥–∞—Ç—å —Å–µ—Ä–≤–µ—Ä"** –∏ –≤—ã–±–µ—Ä–∏—Ç–µ:

**–û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞:**
- Ubuntu 22.04 LTS

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–¥–ª—è –Ω–∞—á–∞–ª–∞):**
- **1 vCPU**
- **1 GB RAM**
- **10 GB SSD**
- **–°—Ç–æ–∏–º–æ—Å—Ç—å:** ~200‚ÇΩ/–º–µ—Å—è—Ü

**–õ–æ–∫–∞—Ü–∏—è:**
- –ú–æ—Å–∫–≤–∞ (—Å–∞–º—ã–π –±—ã—Å—Ç—Ä—ã–π –¥–ª—è –†–æ—Å—Å–∏–∏)

**SSH-–∫–ª—é—á:**
- –ú–æ–∂–µ—Ç–µ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å (–±—É–¥–µ—Ç –ø–∞—Ä–æ–ª—å –¥–ª—è root)

**–ò–º—è —Å–µ—Ä–≤–µ—Ä–∞:**
- `timly-production`

### 1.3 –î–æ–∂–¥–∏—Ç–µ—Å—å —Å–æ–∑–¥–∞–Ω–∏—è

–°–µ—Ä–≤–µ—Ä —Å–æ–∑–¥–∞—Å—Ç—Å—è –∑–∞ 1-2 –º–∏–Ω—É—Ç—ã. –í—ã –ø–æ–ª—É—á–∏—Ç–µ:
- **IP-–∞–¥—Ä–µ—Å** (–Ω–∞–ø—Ä–∏–º–µ—Ä: 185.123.456.78)
- **–ü–∞—Ä–æ–ª—å root** (–ø—Ä–∏–¥–µ—Ç –Ω–∞ email –∏–ª–∏ –≤ –ø–∞–Ω–µ–ª–∏)

**–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ IP –∏ –ø–∞—Ä–æ–ª—å!**

---

## üîß –®–ê–ì 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

### 2.1 –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É

**–ß–µ—Ä–µ–∑ PowerShell/CMD –Ω–∞ Windows:**

```bash
ssh root@–≤–∞—à-ip-–∞–¥—Ä–µ—Å
```

–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å root.

**–ï—Å–ª–∏ ssh –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç**, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–µ–±-–∫–æ–Ω—Å–æ–ª—å –≤ –ø–∞–Ω–µ–ª–∏ Timeweb:
- –û—Ç–∫—Ä–æ–π—Ç–µ —Å–µ—Ä–≤–µ—Ä ‚Üí **"–ö–æ–Ω—Å–æ–ª—å"**

### 2.2 –û–±–Ω–æ–≤–∏—Ç–µ —Å–∏—Å—Ç–µ–º—É

```bash
apt update && apt upgrade -y
```

### 2.3 –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Docker

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker
curl -fsSL https://get.docker.com -o get-docker.sh
sh get-docker.sh

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker Compose
apt install docker-compose -y

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
docker --version
docker-compose --version
```

### 2.4 –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Git

```bash
apt install git -y
```

---

## üì• –®–ê–ì 3: –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

### 3.1 –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

```bash
cd /root
git clone https://github.com/Kirill-found/timly.git
cd timly
```

### 3.2 –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
cp .env.production .env.prod
nano .env.prod
```

**–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª** (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—Ç—Ä–µ–ª–∫–∏ –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏, Ctrl+O –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è, Ctrl+X –¥–ª—è –≤—ã—Ö–æ–¥–∞):

```env
# Database
DB_PASSWORD=—Å–æ–∑–¥–∞–π—Ç–µ-—Å–ª–æ–∂–Ω—ã–π-–ø–∞—Ä–æ–ª—å-123

# Security Keys (—É–∂–µ –∑–∞–ø–æ–ª–Ω–µ–Ω—ã, –º–æ–∂–µ—Ç–µ –æ—Å—Ç–∞–≤–∏—Ç—å)
SECRET_KEY=r9g4dU8XW07FItvapivcdxz3R6GjxJNa8aZyFOIqHMc
ENCRYPTION_KEY=XLM2AFXCxysDuiLgbNKAT-wd1Nx-HJ3CYmqRDKucXSQ=
JWT_SECRET_KEY=lw3dF5hi9DkYIuQmHIpPAEQ9lA1L3M7igW0Zpef-Xy0

# OpenAI
OPENAI_API_KEY=sk-–≤–∞—à-—Ä–µ–∞–ª—å–Ω—ã–π-–∫–ª—é—á-–æ—Ç-openai

# URLs (–∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ IP –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞)
FRONTEND_URL=http://185.123.456.78
BACKEND_URL=http://185.123.456.78:8000
```

**–í–∞–∂–Ω–æ:**
- –ó–∞–º–µ–Ω–∏—Ç–µ `185.123.456.78` –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π IP –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
- –ó–∞–º–µ–Ω–∏—Ç–µ `sk-–≤–∞—à-—Ä–µ–∞–ª—å–Ω—ã–π-–∫–ª—é—á` –Ω–∞ –≤–∞—à OpenAI –∫–ª—é—á
- –ü—Ä–∏–¥—É–º–∞–π—Ç–µ —Å–ª–æ–∂–Ω—ã–π DB_PASSWORD

---

## üöÄ –®–ê–ì 4: –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### 4.1 –°–¥–µ–ª–∞–π—Ç–µ deploy.sh –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º

```bash
chmod +x deploy.sh
```

### 4.2 –ó–∞–ø—É—Å—Ç–∏—Ç–µ –¥–µ–ø–ª–æ–π

```bash
./deploy.sh
```

**–ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç:**
1. –°–∫–∞—á–∞—é—Ç—Å—è –æ–±—Ä–∞–∑—ã Docker
2. –°–æ–±–µ—Ä—É—Ç—Å—è backend –∏ frontend
3. –ó–∞–ø—É—Å—Ç–∏—Ç—Å—è PostgreSQL –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
4. –ó–∞–ø—É—Å—Ç—è—Ç—Å—è –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã

**–≠—Ç–æ –∑–∞–π–º–µ—Ç 5-10 –º–∏–Ω—É—Ç** (–ø–µ—Ä–≤—ã–π —Ä–∞–∑ –¥–æ–ª—å—à–µ).

### 4.3 –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å

```bash
docker-compose -f docker-compose.prod.yml ps
```

–î–æ–ª–∂–Ω—ã –≤–∏–¥–µ—Ç—å 3 –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –≤ —Å—Ç–∞—Ç—É—Å–µ **Up**:
- timly-db-1
- timly-backend-1
- timly-frontend-1

---

## ‚úÖ –®–ê–ì 5: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### 5.1 –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Backend API

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
```
http://–≤–∞—à-ip:8000/api/health
```

–î–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å: `{"status":"ok"}`

### 5.2 –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Frontend

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
```
http://–≤–∞—à-ip
```

–î–æ–ª–∂–Ω–∞ –æ—Ç–∫—Ä—ã—Ç—å—Å—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ TIMLY —Å —Ñ–æ—Ä–º–æ–π –≤—Ö–æ–¥–∞! üéâ

---

## üî• –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Firewall (–í–ê–ñ–ù–û!)

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø–æ—Ä—Ç—ã –º–æ–≥—É—Ç –±—ã—Ç—å –∑–∞–∫—Ä—ã—Ç—ã. –û—Ç–∫—Ä–æ–π—Ç–µ –∏—Ö:

### –í –ø–∞–Ω–µ–ª–∏ Timeweb:

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à —Å–µ—Ä–≤–µ—Ä
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **"Firewall"** –∏–ª–∏ **"–°–µ—Ç—å"**
3. –î–æ–±–∞–≤—å—Ç–µ –ø—Ä–∞–≤–∏–ª–∞:
   - **–ü–æ—Ä—Ç 80** (HTTP) - –¥–ª—è frontend
   - **–ü–æ—Ä—Ç 8000** (HTTP) - –¥–ª—è backend API
   - **–ü–æ—Ä—Ç 22** (SSH) - –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

### –ò–ª–∏ —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—É –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

```bash
ufw allow 80/tcp
ufw allow 8000/tcp
ufw allow 22/tcp
ufw enable
```

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤:

```bash
# –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã
docker-compose -f docker-compose.prod.yml logs -f

# –¢–æ–ª—å–∫–æ backend
docker-compose -f docker-compose.prod.yml logs -f backend

# –¢–æ–ª—å–∫–æ frontend
docker-compose -f docker-compose.prod.yml logs -f frontend
```

### –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤:

```bash
docker-compose -f docker-compose.prod.yml restart
```

### –û—Å—Ç–∞–Ω–æ–≤–∫–∞:

```bash
docker-compose -f docker-compose.prod.yml down
```

---

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

–ö–æ–≥–¥–∞ –≤—ã –≤–Ω–µ—Å–µ—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥ –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ –Ω–∞ GitHub:

```bash
cd /root/timly
./deploy.sh
```

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
1. –°–∫–∞—á–∞–µ—Ç –Ω–æ–≤—ã–π –∫–æ–¥
2. –ü–µ—Ä–µ—Å–æ–±–µ—Ä–µ—Ç –æ–±—Ä–∞–∑—ã
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç —Å–µ—Ä–≤–∏—Å—ã

---

## üåê –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –¥–æ–º–µ–Ω–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –∫—Ä–∞—Å–∏–≤—ã–π –¥–æ–º–µ–Ω –≤–º–µ—Å—Ç–æ IP:

1. **–ö—É–ø–∏—Ç–µ –¥–æ–º–µ–Ω** (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞ reg.ru –∏–ª–∏ timeweb.com)
2. **–î–æ–±–∞–≤—å—Ç–µ A-–∑–∞–ø–∏—Å–∏ –≤ DNS:**
   ```
   @ ‚Üí –≤–∞—à-ip (–¥–ª—è timly.ru)
   www ‚Üí –≤–∞—à-ip (–¥–ª—è www.timly.ru)
   api ‚Üí –≤–∞—à-ip (–¥–ª—è api.timly.ru)
   ```

3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ Nginx –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:**

```bash
apt install nginx -y
nano /etc/nginx/sites-available/timly
```

–î–æ–±–∞–≤—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:
```nginx
server {
    listen 80;
    server_name timly.ru www.timly.ru;

    location / {
        proxy_pass http://localhost:80;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}

server {
    listen 80;
    server_name api.timly.ru;

    location / {
        proxy_pass http://localhost:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

–ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ:
```bash
ln -s /etc/nginx/sites-available/timly /etc/nginx/sites-enabled/
nginx -t
systemctl restart nginx
```

4. **–û–±–Ω–æ–≤–∏—Ç–µ .env.prod:**
```env
FRONTEND_URL=https://timly.ru
BACKEND_URL=https://api.timly.ru
```

5. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ SSL (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–π Let's Encrypt):**
```bash
apt install certbot python3-certbot-nginx -y
certbot --nginx -d timly.ru -d www.timly.ru -d api.timly.ru
```

---

## üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å

**–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
- Timeweb Cloud Server (1 vCPU, 1GB): ~200‚ÇΩ/–º–µ—Å
- –î–æ–º–µ–Ω .ru: ~200‚ÇΩ/–≥–æ–¥
- OpenAI API: ~$5-10/–º–µ—Å (–ø–æ —Ñ–∞–∫—Ç—É)

**–ò—Ç–æ–≥–æ: ~500‚ÇΩ/–º–µ—Å—è—Ü**

**–ü—Ä–∏ —Ä–æ—Å—Ç–µ —Ç—Ä–∞—Ñ–∏–∫–∞:**
- –ú–æ–∂–µ—Ç–µ —É–≤–µ–ª–∏—á–∏—Ç—å –º–æ—â–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–µ—Ä–∞
- –ò–ª–∏ —Ä–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ—Ä–≤–µ—Ä–æ–≤

---

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### Backend –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

```bash
docker-compose -f docker-compose.prod.yml logs backend
```

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ –ª–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω .env.prod
- –ï—Å—Ç—å –ª–∏ OpenAI API –∫–ª—é—á

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

```bash
docker-compose -f docker-compose.prod.yml logs db
```

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ DB_PASSWORD —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω.

### –ù–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Å–∞–π—Ç

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ firewall:
```bash
ufw status
```

–û—Ç–∫—Ä–æ–π—Ç–µ –ø–æ—Ä—Ç—ã 80 –∏ 8000.

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Timeweb

- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** https://timeweb.cloud/docs
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞:** https://timeweb.cloud/support
- **Telegram:** @timewebcloud

---

## üéâ –ì–æ—Ç–æ–≤–æ!

–í–∞—à TIMLY —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —Ä–æ—Å—Å–∏–π—Å–∫–æ–º —Ö–æ—Å—Ç–∏–Ω–≥–µ!

**–ê–¥—Ä–µ—Å–∞:**
- Frontend: `http://–≤–∞—à-ip`
- Backend API: `http://–≤–∞—à-ip:8000`
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API: `http://–≤–∞—à-ip:8000/docs`

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**
1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ –ø–µ—Ä–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏
3. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ –¥–æ–º–µ–Ω
4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

---

**–£–¥–∞—á–∏ —Å –ø—Ä–æ–µ–∫—Ç–æ–º! üöÄ**
